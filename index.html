<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Valent√Ωn</title>

<style>
:root{
  --bg1:#ffe6ee;
  --bg2:#fff6fa;
  --card: rgba(255,255,255,.86);
}

*{box-sizing:border-box;}
html,body{height:100%;}

body{
  margin:0;
  overflow:hidden;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(1100px 700px at 50% 0%, var(--bg2), var(--bg1));
  display:grid;
  place-items:center;
}

/* ================= LOADER ================= */

#loader{
  position:fixed;
  inset:0;
  background: radial-gradient(circle,var(--bg2),var(--bg1));
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:9999;
  transition:opacity .6s ease, visibility .6s ease;
}

.loader-heart{
  font-size:40px;
  animation:pulse 1s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.2);}
}

.loader-text{
  margin-top:10px;
  font-weight:600;
}

/* hidden state */
#loader.hidden{
  opacity:0;
  visibility:hidden;
}

/* ================= CONTENT ================= */

.card{
  width:min(360px, 92vw);
  background:var(--card);
  border-radius:18px;
  box-shadow:0 10px 26px rgba(0,0,0,.14);
  padding:16px 14px;
  text-align:center;
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.6);
  z-index:2;
}

h1{
  margin:0 0 12px;
  font-size: clamp(22px, 6vw, 30px);
}

.btns{
  display:flex;
  gap:10px;
  justify-content:center;
}

button{
  padding:10px 16px;
  font-size: clamp(16px, 4.2vw, 18px);
  border:none;
  border-radius:999px;
  cursor:pointer;
}

#yesBtn{ background:#ff4d7d; color:white; }
#noBtn{ background:white; }

.msg{
  margin-top:12px;
  min-height:28px;
  font-size: clamp(18px, 5vw, 22px);
  font-weight:800;
}

/* LAMAS */
.llama{
  position:fixed;
  width:210px;
  pointer-events:none;
  z-index:0;
  transition:.5s ease;
}

.llama-right{
  right:-115px;
  bottom:-110px;
  transform: translate(-18px,-18px) rotate(-8deg);
}

.llama-left{
  left:-115px;
  bottom:-110px;
  transform: translate(18px,-18px) rotate(8deg);
}

/* DOG */
#dog{
  position:fixed;
  width:120px;
  opacity:0;
  pointer-events:none;
  z-index:3;
  transform: scaleX(-1);
}

/* Confetti canvas */
#confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}
</style>
</head>

<body>

<!-- LOADER -->
<div id="loader">
  <div class="loader-heart">üíñ</div>
  <div class="loader-text">Naƒç√≠t√°m p≈ôekvapen√≠...</div>
</div>

<canvas id="confetti"></canvas>

<img id="llama" class="llama llama-right" src="lama1.png">
<img id="dog" src="pejsek.png">

<div class="card">
  <h1>Bude≈° m≈Øj Valent√Ωn?</h1>
  <div class="btns" id="buttons">
    <button id="yesBtn">ANO</button>
    <button id="noBtn">NE</button>
  </div>
  <div class="msg" id="msg"></div>
</div>

<script>
/* ================= PRELOAD ================= */

function preloadImages(sources){
  return Promise.all(
    sources.map(src => new Promise((resolve)=>{
      const img = new Image();
      img.src = src;
      img.onload = resolve;
      img.onerror = resolve;
    }))
  );
}

window.addEventListener("load", async ()=>{
  await preloadImages(["lama1.png","lama2.png","pejsek.png"]);
  document.getElementById("loader").classList.add("hidden");
});

/* ================= LOGIC ================= */

const llama = document.getElementById('llama');
const dog   = document.getElementById('dog');
const yesBtn = document.getElementById('yesBtn');
const noBtn  = document.getElementById('noBtn');
const msg    = document.getElementById('msg');
const buttons = document.getElementById('buttons');

noBtn.addEventListener('click', async ()=>{
  llama.src = "lama2.png";
  llama.classList.remove("llama-right");
  llama.classList.add("llama-left");

  const rect = noBtn.getBoundingClientRect();
  const dogW = 120;

  dog.style.top = rect.top + "px";
  dog.style.left = (window.innerWidth + dogW) + "px";
  dog.style.opacity = "1";

  // bƒõh k tlaƒç√≠tku
  dog.style.transition = "left 1.2s ease";
  setTimeout(()=>{
    dog.style.left = (rect.left) + "px";
  },50);

  // zmizen√≠ tlaƒç√≠tka
  setTimeout(()=>{
    noBtn.style.opacity="0";
    noBtn.style.display="none";
  },1200);

  // √∫tƒõk doleva
  setTimeout(()=>{
    dog.style.transition="left 1.6s linear";
    dog.style.left = (-dogW - 50) + "px";
  },1400);

  setTimeout(()=>{
    dog.style.opacity="0";
  },2900);
});

/* ================= CONFETTI ================= */

const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

function runConfetti(){
  const pieces = [];
  for(let i=0;i<120;i++){
    pieces.push({
      x:Math.random()*canvas.width,
      y:-20,
      size:6+Math.random()*6,
      speed:2+Math.random()*3
    });
  }

  function update(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p=>{
      p.y+=p.speed;
      ctx.fillStyle=`hsl(${Math.random()*360},70%,70%)`;
      ctx.fillRect(p.x,p.y,p.size,p.size);
    });
    requestAnimationFrame(update);
  }
  update();
}

yesBtn.addEventListener("click",()=>{
  msg.textContent="Miluju tƒõ! üíñ";
  buttons.style.display="none";
  runConfetti();
});
</script>

</body>
</html>
